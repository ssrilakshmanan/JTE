pipeline {
	agent any
	tools {
		maven "maven-3.9.8"
	}
    parameters {
       choice choices: ['dev','stage','trn'], description: 'Pick a build Environment', name: 'buildEnv'
    }
	stages {
        stage('Build') { 
            steps { 
                echo 'Build'
				//bat 'mvn -s C:/Users/ssrilakshmanan/.m2/settings.xml clean test'
				echo "Workspace -- ${WORKSPACE}"
				echo dev.CH_ENV
                echo dev.APP_NAME
				echo "Build Env - ${params.buildEnv}"
				script {
 			       if (params.buildEnv.equals("dev")){ echo "CloudHub env DEV"}
				   if (params.buildEnv.equals("trn")){ echo "CloudHub env SIT:TRN"}
				   def yaml = readYAML file: "${WORKSPACE}/src/main/resources/properties/${params.buildEnv}.yaml"
				   echo "Deploying..."
				   echo env.deployName
				}
            }
        }
        stage('Test'){
            steps {
                echo 'Test' 
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploy' 
            }
        }
    }
}